INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 07:00:00+03:00 (in 20378.482208 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @grand_headman_bot id=6650110444 - 'Grand Headman MIREA'
INFO:root:headmen middleware started
INFO:root:connected to database
WARNING:root:headmen reg middleware finished, already registered as headmen
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318144 is handled. Duration 234 ms by bot id=6650110444
INFO:aiogram.dispatcher:Polling stopped
INFO:aiogram.dispatcher:Polling stopped for bot @grand_headman_bot id=6650110444 - 'Grand Headman MIREA'
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-27 07:00:00+03:00 (in 81681.997712 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @grand_headman_bot id=6650110444 - 'Grand Headman MIREA'
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318166 is handled. Duration 952 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318167 is handled. Duration 217 ms by bot id=6650110444
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318168 is handled. Duration 312 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318169 is handled. Duration 202 ms by bot id=6650110444
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318170 is handled. Duration 281 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318171 is handled. Duration 186 ms by bot id=6650110444
INFO:aiogram.dispatcher:Polling stopped
INFO:aiogram.dispatcher:Polling stopped for bot @grand_headman_bot id=6650110444 - 'Grand Headman MIREA'
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-27 07:00:00+03:00 (in 80917.979853 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @grand_headman_bot id=6650110444 - 'Grand Headman MIREA'
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318172 is handled. Duration 280 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318173 is handled. Duration 92 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318174 is handled. Duration 77 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318175 is handled. Duration 93 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318176 is handled. Duration 77 ms by bot id=6650110444
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318177 is handled. Duration 155 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318178 is handled. Duration 187 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318179 is handled. Duration 108 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318180 is handled. Duration 77 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318181 is handled. Duration 217 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318182 is handled. Duration 188 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318183 is handled. Duration 93 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318184 is handled. Duration 203 ms by bot id=6650110444
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318185 is handled. Duration 172 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318186 is handled. Duration 202 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318187 is handled. Duration 218 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318188 is handled. Duration 202 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318189 is handled. Duration 202 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318190 is handled. Duration 94 ms by bot id=6650110444
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318191 is handled. Duration 359 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318192 is handled. Duration 265 ms by bot id=6650110444
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318193 is handled. Duration 156 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318194 is handled. Duration 217 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318195 is handled. Duration 217 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318196 is handled. Duration 219 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318197 is handled. Duration 204 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318198 is handled. Duration 312 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318199 is handled. Duration 187 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318200 is handled. Duration 234 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318201 is handled. Duration 250 ms by bot id=6650110444
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318202 is handled. Duration 312 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318203 is handled. Duration 170 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318204 is handled. Duration 219 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318205 is handled. Duration 109 ms by bot id=6650110444
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318206 is handled. Duration 265 ms by bot id=6650110444
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=105318207 is handled. Duration 359 ms by bot id=6650110444
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
WARNING:root:Telegram server says - Bad Request: chat not found
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:18:11.420828+03:00 (in 52.437510 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:aiogram.dispatcher:Polling stopped
INFO:aiogram.dispatcher:Polling stopped for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:20:08.606925+03:00 (in 59.994917 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:root:callback middleware started
INFO:root:connected to database
ERROR:root:<class 'TypeError'>
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499529 is not handled. Duration 0 ms by bot id=5342995443
ERROR:aiogram.event:Cause exception while process update id=173499529 by bot id=5342995443
TypeError: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 308, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 157, in feed_update
    response = await self.update.wrap_outer_middleware(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 275, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 144, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 136, in _propagate_event
    response = await observer.trigger(event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\middlewares.py", line 106, in __call__
    a = 60 * con.get_time(user_id).hour + con.get_time(user_id).minute + 90
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\service.py", line 111, in get_time
    return datetime.time(*map(int, time[0].split(":")))
TypeError: 'NoneType' object is not subscriptable
INFO:root:headmen commands middleware started
INFO:root:connected to database
WARNING:root:headmen commands middleware finished, user must be registered
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499530 is handled. Duration 265 ms by bot id=5342995443
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:start command
INFO:aiogram.event:Update id=173499531 is handled. Duration 94 ms by bot id=5342995443
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:start command
INFO:aiogram.event:Update id=173499532 is handled. Duration 93 ms by bot id=5342995443
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:surname handled
INFO:aiogram.event:Update id=173499533 is handled. Duration 93 ms by bot id=5342995443
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:surname handled
INFO:aiogram.event:Update id=173499534 is handled. Duration 77 ms by bot id=5342995443
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:name handled
INFO:aiogram.event:Update id=173499535 is handled. Duration 172 ms by bot id=5342995443
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:group name handled
INFO:root:connected to database
INFO:root:user was registered in database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499536 is handled. Duration 547 ms by bot id=5342995443
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:name handled
INFO:aiogram.event:Update id=173499537 is handled. Duration 140 ms by bot id=5342995443
INFO:root:callback middleware started
INFO:root:connected to database
WARNING:root:(poll) callback middleware finished, lesson was already started
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499538 is handled. Duration 202 ms by bot id=5342995443
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:group name handled
INFO:root:connected to database
INFO:root:user was registered in database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499539 is handled. Duration 250 ms by bot id=5342995443
INFO:aiogram.event:Update id=173499540 is not handled. Duration 15 ms by bot id=5342995443
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:21:08.606925+03:00 (in 59.984866 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:21:08 MSK)" (scheduled at 2023-10-26 11:20:08.606925+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:21:08 MSK)" executed successfully
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499541 is handled. Duration 108 ms by bot id=5342995443
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499542 is handled. Duration 265 ms by bot id=5342995443
INFO:root:headmen commands middleware started
INFO:root:connected to database
WARNING:root:headmen commands middleware finished, user must me headman to use this command
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499543 is handled. Duration 172 ms by bot id=5342995443
INFO:root:headmen middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:headmen reg middleware finished
INFO:root:set_headmen command, password was asked
INFO:aiogram.event:Update id=173499544 is handled. Duration 187 ms by bot id=5342995443
INFO:root:headmen middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:headmen reg middleware finished
INFO:root:password was handled
INFO:root:connected to database
INFO:root:headmen status was set
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499545 is handled. Duration 125 ms by bot id=5342995443
INFO:root:headmen middleware started
INFO:root:connected to database
WARNING:root:headmen reg middleware finished, already registered as headmen
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499546 is handled. Duration 141 ms by bot id=5342995443
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499547 is handled. Duration 407 ms by bot id=5342995443
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499548 is handled. Duration 905 ms by bot id=5342995443
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:22:08.606925+03:00 (in 59.986658 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:22:08 MSK)" (scheduled at 2023-10-26 11:21:08.606925+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:22:08 MSK)" executed successfully
INFO:aiogram.event:Update id=173499549 is not handled. Duration 0 ms by bot id=5342995443
INFO:aiogram.event:Update id=173499550 is not handled. Duration 15 ms by bot id=5342995443
INFO:aiogram.event:Update id=173499551 is not handled. Duration 0 ms by bot id=5342995443
INFO:aiogram.dispatcher:Polling stopped
INFO:aiogram.dispatcher:Polling stopped for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:23:07.947111+03:00 (in 59.312514 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499552 is handled. Duration 390 ms by bot id=5342995443
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499553 is handled. Duration 312 ms by bot id=5342995443
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499554 is handled. Duration 202 ms by bot id=5342995443
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:24:07.947111+03:00 (in 59.985170 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:24:07 MSK)" (scheduled at 2023-10-26 11:23:07.947111+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:24:07 MSK)" executed successfully
INFO:aiogram.dispatcher:Polling stopped
INFO:aiogram.dispatcher:Polling stopped for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:24:21.005601+03:00 (in 58.836097 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499555 is handled. Duration 312 ms by bot id=5342995443
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499556 is handled. Duration 327 ms by bot id=5342995443
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
ERROR:root:<class 'TypeError'>
INFO:root:disconnected from database
ERROR:root:<class 'TypeError'>
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499557 is not handled. Duration 140 ms by bot id=5342995443
ERROR:aiogram.event:Cause exception while process update id=173499557 by bot id=5342995443
TypeError: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 308, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 157, in feed_update
    response = await self.update.wrap_outer_middleware(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 275, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 144, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 136, in _propagate_event
    response = await observer.trigger(event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\middlewares.py", line 117, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\callbacks.py", line 67, in attendance_send_callback
    + f"{attendance_for_headmen_message(callback)}",
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\messages.py", line 105, in attendance_for_headmen_message
    visit_text += user
TypeError: can only concatenate str (not "list") to str
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
ERROR:root:<class 'TypeError'>
INFO:root:disconnected from database
ERROR:root:<class 'TypeError'>
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499558 is not handled. Duration 187 ms by bot id=5342995443
ERROR:aiogram.event:Cause exception while process update id=173499558 by bot id=5342995443
TypeError: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 308, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 157, in feed_update
    response = await self.update.wrap_outer_middleware(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 275, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 144, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 136, in _propagate_event
    response = await observer.trigger(event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\middlewares.py", line 117, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\callbacks.py", line 67, in attendance_send_callback
    + f"{attendance_for_headmen_message(callback)}",
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\messages.py", line 105, in attendance_for_headmen_message
    visit_text += user
TypeError: can only concatenate str (not "list") to str
INFO:aiogram.dispatcher:Polling stopped
INFO:aiogram.dispatcher:Polling stopped for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:25:00.326597+03:00 (in 59.306414 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499559 is handled. Duration 297 ms by bot id=5342995443
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499560 is handled. Duration 250 ms by bot id=5342995443
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499561 is handled. Duration 281 ms by bot id=5342995443
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:26:00.326597+03:00 (in 59.984908 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:26:00 MSK)" (scheduled at 2023-10-26 11:25:00.326597+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:26:00 MSK)" executed successfully
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:27:00.326597+03:00 (in 59.998443 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:27:00 MSK)" (scheduled at 2023-10-26 11:26:00.326597+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:27:00 MSK)" executed successfully
INFO:aiogram.dispatcher:Polling stopped
INFO:aiogram.dispatcher:Polling stopped for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:30:38.681516+03:00 (in 58.634708 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499562 is handled. Duration 344 ms by bot id=5342995443
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499563 is handled. Duration 281 ms by bot id=5342995443
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499564 is handled. Duration 375 ms by bot id=5342995443
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499565 is handled. Duration 313 ms by bot id=5342995443
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499566 is handled. Duration 250 ms by bot id=5342995443
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
ERROR:root:<class 'aiogram.exceptions.TelegramBadRequest'>
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499567 is not handled. Duration 217 ms by bot id=5342995443
ERROR:aiogram.event:Cause exception while process update id=173499567 by bot id=5342995443
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 308, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 157, in feed_update
    response = await self.update.wrap_outer_middleware(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 275, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 144, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 136, in _propagate_event
    response = await observer.trigger(event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\middlewares.py", line 117, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\callbacks.py", line 66, in attendance_send_callback
    await callback.message.edit_text(text=f"{lessons[int(callback.data)][0]}, "
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\client\bot.py", line 432, in __call__
    return await self.session(self, method, timeout=request_timeout)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\client\session\aiohttp.py", line 175, in make_request
    response = self.check_response(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:31:38.681516+03:00 (in 59.999512 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:31:38 MSK)" (scheduled at 2023-10-26 11:30:38.681516+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:31:38 MSK)" executed successfully
INFO:aiogram.dispatcher:Polling stopped
INFO:aiogram.dispatcher:Polling stopped for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:32:56.992662+03:00 (in 59.503067 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:start command
INFO:aiogram.event:Update id=173499568 is handled. Duration 204 ms by bot id=5342995443
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:surname handled
INFO:aiogram.event:Update id=173499569 is handled. Duration 109 ms by bot id=5342995443
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:name handled
INFO:aiogram.event:Update id=173499570 is handled. Duration 108 ms by bot id=5342995443
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:group name handled
INFO:root:connected to database
INFO:root:user was registered in database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499571 is handled. Duration 218 ms by bot id=5342995443
INFO:root:headmen commands middleware started
INFO:root:connected to database
WARNING:root:headmen commands middleware finished, user must me headman to use this command
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499572 is handled. Duration 125 ms by bot id=5342995443
INFO:root:headmen middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:headmen reg middleware finished
INFO:root:set_headmen command, password was asked
INFO:aiogram.event:Update id=173499573 is handled. Duration 109 ms by bot id=5342995443
INFO:root:headmen middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:headmen reg middleware finished
INFO:root:password was handled
INFO:root:connected to database
INFO:root:headmen status was set
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499574 is handled. Duration 108 ms by bot id=5342995443
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499575 is handled. Duration 250 ms by bot id=5342995443
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499576 is handled. Duration 344 ms by bot id=5342995443
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:33:56.992662+03:00 (in 59.987543 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:33:56 MSK)" (scheduled at 2023-10-26 11:32:56.992662+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:33:56 MSK)" executed successfully
INFO:aiogram.dispatcher:Polling stopped for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:aiogram.dispatcher:Polling stopped
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:34:02.327386+03:00 (in 59.063247 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499577 is handled. Duration 375 ms by bot id=5342995443
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499578 is handled. Duration 312 ms by bot id=5342995443
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=173499579 is handled. Duration 436 ms by bot id=5342995443
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:35:02.327386+03:00 (in 59.999263 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:35:02 MSK)" (scheduled at 2023-10-26 11:34:02.327386+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:35:02 MSK)" executed successfully
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:36:02.327386+03:00 (in 59.995740 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:36:02 MSK)" (scheduled at 2023-10-26 11:35:02.327386+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:36:02 MSK)" executed successfully
INFO:aiogram.dispatcher:Polling stopped for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:aiogram.dispatcher:Polling stopped
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:37:33.683655+03:00 (in 59.267697 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:aiogram.dispatcher:Polling stopped for bot @Antoni678901bot id=5342995443 - 'Antoni678901'
INFO:aiogram.dispatcher:Polling stopped
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-20-23 HTTP/1.1" 200 19769
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:38:21.742645+03:00 (in 59.348595 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956752 is handled. Duration 500 ms by bot id=5922725603
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956753 is handled. Duration 187 ms by bot id=5922725603
INFO:aiogram.dispatcher:Polling stopped for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:aiogram.dispatcher:Polling stopped
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:39:31.625123+03:00 (in 59.513697 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:start command
INFO:aiogram.event:Update id=230956755 is handled. Duration 250 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:surname handled
INFO:aiogram.event:Update id=230956756 is handled. Duration 109 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:start command
INFO:aiogram.event:Update id=230956757 is handled. Duration 108 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:name handled
INFO:aiogram.event:Update id=230956758 is handled. Duration 140 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:group name handled
INFO:root:connected to database
INFO:root:user was registered in database
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:surname handled
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956759 is handled. Duration 781 ms by bot id=5922725603
INFO:aiogram.event:Update id=230956760 is handled. Duration 312 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:start command
INFO:aiogram.event:Update id=230956761 is handled. Duration 108 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:surname handled
INFO:aiogram.event:Update id=230956762 is handled. Duration 93 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:name handled
INFO:aiogram.event:Update id=230956763 is handled. Duration 140 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:group name handled
INFO:root:connected to database
INFO:root:user was registered in database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956764 is handled. Duration 375 ms by bot id=5922725603
INFO:aiogram.dispatcher:Polling stopped for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:aiogram.dispatcher:Polling stopped
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:40:21.258996+03:00 (in 59.378920 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
ERROR:root:<class 'sqlite3.OperationalError'>
INFO:root:disconnected from database
ERROR:root:<class 'sqlite3.OperationalError'>
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956766 is not handled. Duration 5655 ms by bot id=5922725603
ERROR:aiogram.event:Cause exception while process update id=230956766 by bot id=5922725603
OperationalError: database is locked
Traceback (most recent call last):
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 308, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 157, in feed_update
    response = await self.update.wrap_outer_middleware(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 275, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 144, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 136, in _propagate_event
    response = await observer.trigger(event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\middlewares.py", line 113, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\callbacks.py", line 50, in check_in_callback
    con.change_attendance(callback.from_user.id, info)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\service.py", line 105, in change_attendance
    cur.execute("UPDATE students SET attendance = ? WHERE telegram_id = ?",
sqlite3.OperationalError: database is locked
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
ERROR:root:<class 'sqlite3.OperationalError'>
INFO:root:disconnected from database
ERROR:root:<class 'sqlite3.OperationalError'>
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956767 is not handled. Duration 5515 ms by bot id=5922725603
ERROR:aiogram.event:Cause exception while process update id=230956767 by bot id=5922725603
OperationalError: database is locked
Traceback (most recent call last):
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 308, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 157, in feed_update
    response = await self.update.wrap_outer_middleware(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 275, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 144, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 136, in _propagate_event
    response = await observer.trigger(event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\middlewares.py", line 113, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\callbacks.py", line 29, in check_in_callback
    con.change_attendance(callback.from_user.id, callback_data + ' 0')
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\service.py", line 105, in change_attendance
    cur.execute("UPDATE students SET attendance = ? WHERE telegram_id = ?",
sqlite3.OperationalError: database is locked
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956765 is handled. Duration 11562 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956768 is handled. Duration 140 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956769 is handled. Duration 250 ms by bot id=5922725603
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956770 is handled. Duration 734 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956771 is handled. Duration 266 ms by bot id=5922725603
INFO:aiogram.dispatcher:Polling stopped for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:aiogram.dispatcher:Polling stopped
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:41:37.604149+03:00 (in 58.821448 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:aiogram.dispatcher:Polling stopped for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:aiogram.dispatcher:Polling stopped
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:41:42.864886+03:00 (in 59.255064 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956772 is handled. Duration 234 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956773 is handled. Duration 108 ms by bot id=5922725603
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956774 is handled. Duration 375 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956775 is handled. Duration 219 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
WARNING:root:middleware finished, already registered
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956776 is handled. Duration 218 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956777 is handled. Duration 155 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956778 is handled. Duration 156 ms by bot id=5922725603
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:41:42.864886+03:00 (in 0.002073 seconds)
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:42:42.864886+03:00 (in 59.986186 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:42:42 MSK)" (scheduled at 2023-10-26 11:41:42.864886+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:42:42 MSK)" executed successfully
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956779 is handled. Duration 141 ms by bot id=5922725603
INFO:aiogram.dispatcher:Polling stopped for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:aiogram.dispatcher:Polling stopped
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:42:57.372196+03:00 (in 58.963913 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:root:callback middleware started
INFO:root:connected to database
ERROR:root:<class 'TypeError'>
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956781 is not handled. Duration 0 ms by bot id=5922725603
ERROR:aiogram.event:Cause exception while process update id=230956781 by bot id=5922725603
TypeError: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 308, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 157, in feed_update
    response = await self.update.wrap_outer_middleware(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 275, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 144, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 136, in _propagate_event
    response = await observer.trigger(event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\middlewares.py", line 106, in __call__
    a = 60 * con.get_time(user_id).hour + con.get_time(user_id).minute + 90
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\service.py", line 111, in get_time
    return datetime.time(*map(int, time[0].split(":")))
TypeError: 'NoneType' object is not subscriptable
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956782 is handled. Duration 280 ms by bot id=5922725603
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956783 is handled. Duration 327 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956784 is handled. Duration 234 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:start command
INFO:aiogram.event:Update id=230956785 is handled. Duration 92 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:surname handled
INFO:aiogram.event:Update id=230956786 is handled. Duration 92 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:name handled
INFO:aiogram.event:Update id=230956787 is handled. Duration 108 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:group name handled
INFO:root:connected to database
INFO:root:user was registered in database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956788 is handled. Duration 515 ms by bot id=5922725603
INFO:aiogram.event:Update id=230956789 is not handled. Duration 15 ms by bot id=5922725603
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:42:57.372196+03:00 (in 0.001700 seconds)
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:43:57.372196+03:00 (in 59.985743 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:43:57 MSK)" (scheduled at 2023-10-26 11:42:57.372196+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:43:57 MSK)" executed successfully
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956790 is handled. Duration 250 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956791 is handled. Duration 265 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956792 is handled. Duration 109 ms by bot id=5922725603
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:44:57.372196+03:00 (in 59.998538 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:44:57 MSK)" (scheduled at 2023-10-26 11:43:57.372196+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:44:57 MSK)" executed successfully
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956793 is handled. Duration 296 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956794 is handled. Duration 281 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956795 is handled. Duration 312 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:start command
INFO:aiogram.event:Update id=230956796 is handled. Duration 280 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:surname handled
INFO:aiogram.event:Update id=230956797 is handled. Duration 94 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:name handled
INFO:aiogram.event:Update id=230956798 is handled. Duration 94 ms by bot id=5922725603
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:44:57.372196+03:00 (in 0.005610 seconds)
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:45:57.372196+03:00 (in 59.990474 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:45:57 MSK)" (scheduled at 2023-10-26 11:44:57.372196+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:45:57 MSK)" executed successfully
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:group name handled
INFO:root:connected to database
INFO:root:user was registered in database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956799 is handled. Duration 250 ms by bot id=5922725603
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956800 is handled. Duration 219 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956801 is handled. Duration 233 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956802 is handled. Duration 312 ms by bot id=5922725603
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:46:57.372196+03:00 (in 59.988465 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:46:57 MSK)" (scheduled at 2023-10-26 11:45:57.372196+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:46:57 MSK)" executed successfully
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956803 is handled. Duration 405 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956804 is handled. Duration 250 ms by bot id=5922725603
INFO:aiogram.dispatcher:Polling stopped for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:aiogram.dispatcher:Polling stopped
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:48:37.748468+03:00 (in 59.089797 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:start command
INFO:aiogram.event:Update id=230956806 is handled. Duration 234 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:surname handled
INFO:aiogram.event:Update id=230956807 is handled. Duration 156 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
INFO:root:name handled
INFO:aiogram.event:Update id=230956808 is handled. Duration 94 ms by bot id=5922725603
INFO:root:registration middleware started
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:registration middleware finished
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:group name handled
INFO:root:connected to database
INFO:root:user was registered in database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956809 is handled. Duration 217 ms by bot id=5922725603
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956810 is handled. Duration 281 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956811 is handled. Duration 313 ms by bot id=5922725603
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:49:37.748468+03:00 (in 59.974034 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:49:37 MSK)" (scheduled at 2023-10-26 11:48:37.748468+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:49:37 MSK)" executed successfully
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956812 is handled. Duration 234 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956813 is handled. Duration 234 ms by bot id=5922725603
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:50:37.748468+03:00 (in 59.982622 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:50:37 MSK)" (scheduled at 2023-10-26 11:49:37.748468+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:50:37 MSK)" executed successfully
INFO:aiogram.dispatcher:Polling stopped for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:aiogram.dispatcher:Polling stopped
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:52:30.694613+03:00 (in 58.912773 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:root:callback middleware started
INFO:root:connected to database
INFO:root:(poll) callback middleware finished
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956814 is handled. Duration 312 ms by bot id=5922725603
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956815 is handled. Duration 218 ms by bot id=5922725603
INFO:aiogram.event:Update id=230956816 is not handled. Duration 16 ms by bot id=5922725603
INFO:root:headmen commands middleware started
INFO:root:connected to database
INFO:root:headmen commands middleware finished
INFO:root:getstat command
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956817 is handled. Duration 344 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956818 is handled. Duration 219 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956819 is handled. Duration 327 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956820 is handled. Duration 250 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956821 is handled. Duration 265 ms by bot id=5922725603
INFO:root:callback middleware started
INFO:root:(attendance) callback middlewre finished
INFO:root:attendance callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:connected to database
INFO:root:disconnected from database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956822 is handled. Duration 344 ms by bot id=5922725603
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:53:30.694613+03:00 (in 59.998985 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:53:30 MSK)" (scheduled at 2023-10-26 11:52:30.694613+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:53:30 MSK)" executed successfully
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:54:30.694613+03:00 (in 59.982606 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:54:30 MSK)" (scheduled at 2023-10-26 11:53:30.694613+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:54:30 MSK)" executed successfully
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:55:30.694613+03:00 (in 59.986217 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:55:30 MSK)" (scheduled at 2023-10-26 11:54:30.694613+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:55:30 MSK)" executed successfully
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 11:56:30.694613+03:00 (in 59.993208 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:56:30 MSK)" (scheduled at 2023-10-26 11:55:30.694613+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 11:56:30 MSK)" executed successfully
INFO:aiogram.dispatcher:Polling stopped for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:aiogram.dispatcher:Polling stopped
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
ERROR:root:<class 'asyncio.exceptions.CancelledError'>
INFO:root:disconnected from database
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000260F90868C0>
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:27:11.752174+03:00 (in 56.883683 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:root:callback middleware started
INFO:root:connected to database
WARNING:root:(poll) callback middleware finished, lesson was already started
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956823 is handled. Duration 1218 ms by bot id=5922725603
INFO:aiogram.dispatcher:Polling stopped for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:aiogram.dispatcher:Polling stopped
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:27:45.841327+03:00 (in 50.570281 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:root:check_in callback handled
INFO:root:connected to database
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:28:45.841327+03:00 (in 59.992973 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:28:45 MSK)" (scheduled at 2023-10-26 14:27:45.841327+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
ERROR:root:<class 'sqlite3.OperationalError'>
INFO:root:disconnected from database
ERROR:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:28:45 MSK)" raised an exception
Traceback (most recent call last):
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\apscheduler\executors\base_py3.py", line 29, in run_coroutine_job
    retval = await job.func(*job.args, **job.kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\poll.py", line 30, in job
    con.set_time(first_lesson_time, group[0])
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\service.py", line 115, in set_time
    cur.execute("UPDATE students SET time = ? WHERE study_group = ?",
sqlite3.OperationalError: database is locked
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956825 is handled. Duration 29625 ms by bot id=5922725603
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:29:45.841327+03:00 (in 59.981378 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:29:45 MSK)" (scheduled at 2023-10-26 14:28:45.841327+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:29:45 MSK)" executed successfully
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956826 is handled. Duration 141 ms by bot id=5922725603
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:30:45.841327+03:00 (in 59.999965 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:30:45 MSK)" (scheduled at 2023-10-26 14:29:45.841327+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:30:45 MSK)" executed successfully
INFO:aiogram.dispatcher:Polling stopped for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:aiogram.dispatcher:Polling stopped
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:30:54.405562+03:00 (in 55.503913 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:root:check_in callback handled
INFO:root:connected to database
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956828 is handled. Duration 344 ms by bot id=5922725603
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:31:54.405562+03:00 (in 59.990838 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:31:54 MSK)" (scheduled at 2023-10-26 14:30:54.405562+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:31:54 MSK)" executed successfully
INFO:root:check_in callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956829 is handled. Duration 250 ms by bot id=5922725603
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:32:54.405562+03:00 (in 59.989536 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:32:54 MSK)" (scheduled at 2023-10-26 14:31:54.405562+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:aiogram.dispatcher:Polling stopped for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:aiogram.dispatcher:Polling stopped
ERROR:root:<class 'asyncio.exceptions.CancelledError'>
INFO:root:disconnected from database
ERROR:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:32:54 MSK)" raised an exception
Traceback (most recent call last):
  File "C:\Users\dima-\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "C:\Users\dima-\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 633, in run_until_complete
    self.run_forever()
  File "C:\Users\dima-\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\dima-\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 600, in run_forever
    self._run_once()
  File "C:\Users\dima-\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1860, in _run_once
    event_list = self._selector.select(timeout)
  File "C:\Users\dima-\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 439, in select
    self._poll(timeout)
  File "C:\Users\dima-\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 788, in _poll
    status = _overlapped.GetQueuedCompletionStatus(self._iocp, ms)
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\apscheduler\executors\base_py3.py", line 29, in run_coroutine_job
    retval = await job.func(*job.args, **job.kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\poll.py", line 35, in job
    await bot(user_id[0], POLL_MESSAGE, reply_markup=load_attendance_kb(day))
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\client\bot.py", line 2709, in send_message
    return await self(call, request_timeout=request_timeout)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\client\bot.py", line 432, in __call__
    return await self.session(self, method, timeout=request_timeout)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\client\session\aiohttp.py", line 167, in make_request
    async with session.post(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiohttp\client.py", line 1167, in __aenter__
    self._resp = await self._coro
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiohttp\client.py", line 586, in _request
    await resp.start(conn)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiohttp\client_reqrep.py", line 905, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiohttp\streams.py", line 616, in read
    await self._waiter
asyncio.exceptions.CancelledError
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:33:08.342542+03:00 (in 51.684918 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:root:check_in callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956831 is handled. Duration 7890 ms by bot id=5922725603
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:33:08.342542+03:00 (in 0.001761 seconds)
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:34:08.342542+03:00 (in 59.985836 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:34:08 MSK)" (scheduled at 2023-10-26 14:33:08.342542+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:34:08 MSK)" executed successfully
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:35:08.342542+03:00 (in 59.997356 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:35:08 MSK)" (scheduled at 2023-10-26 14:34:08.342542+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:35:08 MSK)" executed successfully
INFO:aiogram.dispatcher:Polling stopped for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:aiogram.dispatcher:Polling stopped
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:36:28.197688+03:00 (in 57.093285 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:root:check_in callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956833 is handled. Duration 3670 ms by bot id=5922725603
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:37:28.197688+03:00 (in 59.996750 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:37:28 MSK)" (scheduled at 2023-10-26 14:36:28.197688+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:37:28 MSK)" executed successfully
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:38:28.197688+03:00 (in 59.988989 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:38:28 MSK)" (scheduled at 2023-10-26 14:37:28.197688+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:38:28 MSK)" executed successfully
INFO:root:check_in callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956834 is handled. Duration 250 ms by bot id=5922725603
INFO:root:check_in callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
INFO:root:check_in callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
ERROR:root:<class 'sqlite3.OperationalError'>
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956836 is not handled. Duration 11109 ms by bot id=5922725603
ERROR:aiogram.event:Cause exception while process update id=230956836 by bot id=5922725603
OperationalError: database is locked
Traceback (most recent call last):
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 308, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 157, in feed_update
    response = await self.update.wrap_outer_middleware(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 275, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 144, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 136, in _propagate_event
    response = await observer.trigger(event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\callbacks.py", line 57, in check_in_callback
    con.change_attendance(callback.from_user.id, info)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\service.py", line 105, in change_attendance
    cur.execute("UPDATE students SET attendance = ? WHERE telegram_id = ?",
sqlite3.OperationalError: database is locked
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956835 is handled. Duration 11827 ms by bot id=5922725603
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:39:28.197688+03:00 (in 59.983362 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:39:28 MSK)" (scheduled at 2023-10-26 14:38:28.197688+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:39:28 MSK)" executed successfully
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:39:28.197688+03:00 (in 0.004708 seconds)
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:40:28.197688+03:00 (in 59.989704 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:40:28 MSK)" (scheduled at 2023-10-26 14:39:28.197688+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:40:28 MSK)" executed successfully
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:41:28.197688+03:00 (in 59.984450 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:41:28 MSK)" (scheduled at 2023-10-26 14:40:28.197688+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
INFO:root:disconnected from database
INFO:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:41:28 MSK)" executed successfully
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:41:28.197688+03:00 (in 0.001796 seconds)
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:42:28.197688+03:00 (in 59.985837 seconds)
INFO:apscheduler.executors.default:Running job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:42:28 MSK)" (scheduled at 2023-10-26 14:41:28.197688+03:00)
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
ERROR:root:<class 'KeyboardInterrupt'>
INFO:root:disconnected from database
ERROR:apscheduler.executors.default:Job "job (trigger: interval[0:01:00], next run at: 2023-10-26 14:42:28 MSK)" raised an exception
Traceback (most recent call last):
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\apscheduler\executors\base_py3.py", line 29, in run_coroutine_job
    retval = await job.func(*job.args, **job.kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\poll.py", line 24, in job
    api.regenerate(group[0])
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\work_api.py", line 33, in regenerate
    self.req = requests.get(f"https://timetable.mirea.ru/api/groups/name/{group}").json()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\requests\api.py", line 73, in get
    return request("get", url, params=params, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\requests\api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\requests\sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\requests\sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\requests\adapters.py", line 486, in send
    resp = conn.urlopen(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\urllib3\connectionpool.py", line 790, in urlopen
    response = self._make_request(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\urllib3\connectionpool.py", line 536, in _make_request
    response = conn.getresponse()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\urllib3\connection.py", line 461, in getresponse
    httplib_response = super().getresponse()
  File "C:\Users\dima-\AppData\Local\Programs\Python\Python310\lib\http\client.py", line 1374, in getresponse
    response.begin()
  File "C:\Users\dima-\AppData\Local\Programs\Python\Python310\lib\http\client.py", line 318, in begin
    version, status, reason = self._read_status()
  File "C:\Users\dima-\AppData\Local\Programs\Python\Python310\lib\http\client.py", line 279, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "C:\Users\dima-\AppData\Local\Programs\Python\Python310\lib\socket.py", line 705, in readinto
    return self._sock.recv_into(b)
  File "C:\Users\dima-\AppData\Local\Programs\Python\Python310\lib\ssl.py", line 1273, in recv_into
    return self.read(nbytes, buffer)
  File "C:\Users\dima-\AppData\Local\Programs\Python\Python310\lib\ssl.py", line 1129, in read
    return self._sslobj.read(len, buffer)
KeyboardInterrupt
INFO:root:connected to database
INFO:root:table created
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
WARNING:root:Telegram server says - Forbidden: bot was blocked by the user
INFO:root:disconnected from database
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Added job "job" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:root:bot is starting
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2023-10-26 14:42:43.596676+03:00 (in 55.995445 seconds)
INFO:aiogram.dispatcher:Start polling
INFO:aiogram.dispatcher:Run polling for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:root:check_in callback handled
INFO:root:connected to database
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): timetable.mirea.ru:443
DEBUG:urllib3.connectionpool:https://timetable.mirea.ru:443 "GET /api/groups/name/%D0%98%D0%9A%D0%91%D0%9E-40-23 HTTP/1.1" 200 20746
ERROR:root:<class 'UnboundLocalError'>
INFO:root:disconnected from database
INFO:aiogram.event:Update id=230956837 is not handled. Duration 2686 ms by bot id=5922725603
ERROR:aiogram.event:Cause exception while process update id=230956837 by bot id=5922725603
UnboundLocalError: local variable 'chosen_lesson' referenced before assignment
Traceback (most recent call last):
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 308, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 157, in feed_update
    response = await self.update.wrap_outer_middleware(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 275, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 144, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 116, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 111, in _wrapped
    return await self._propagate_event(
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\router.py", line 136, in _propagate_event
    response = await observer.trigger(event, **kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 120, in trigger
    return await wrapped_inner(event, kwargs)
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 42, in call
    return await wrapped()
  File "C:\Users\dima-\bot_MIREA_IKBO40-23\callbacks.py", line 55, in check_in_callback
    info = 'lesson ' + str(chosen_lesson)
UnboundLocalError: local variable 'chosen_lesson' referenced before assignment
INFO:aiogram.dispatcher:Polling stopped for bot @ikbo_40_23_bot id=5922725603 - '-40-23 Bot'
INFO:aiogram.dispatcher:Polling stopped
